!function(e){function t(e){e.startMove=e.startMove?e.startMove:{startX:null,startY:null,timestamp:null};var t,s,a=(new Date).getTime();return e.touches&&(s=[{lastX:e.deltaX,lastY:e.deltaY,moved:null,startX:e.screenX-e.startMove.screenX,startY:e.screenY-e.startMove.screenY}],t={vector:e.vector||null,orientation:window.orientation||null,lastX:s[0].lastX>0?1:s[0].lastX<0?-1:0,lastY:s[0].lastY>0?1:s[0].lastY<0?-1:0,startX:s[0].startX>0?1:s[0].startX<0?-1:0,startY:s[0].startY>0?1:s[0].startY<0?-1:0},s[0].moved=Math.sqrt(Math.pow(Math.abs(s[0].startX),2)+Math.pow(Math.abs(s[0].startY),2))),{type:e.type||null,originalEvent:e.event||null,delta:s||null,direction:t||{orientation:window.orientation||null,vector:e.vector||null},duration:e.duration?e.duration:e.startMove.timestamp?a-e.timestamp:null,rotation:e.rotation||null,scale:e.scale||null,description:e.description||[e.type,":",e.touches,":",0!=s[0].lastX?s[0].lastX>0?"right":"left":"steady",":",0!=s[0].lastY?s[0].lastY>0?"down":"up":"steady"].join("")}}function s(){var t=["landscape:clockwise:","portrait:default:","landscape:counterclockwise:","portrait:upsidedown:"];e(window).triggerHandler("orientationchange",{direction:{orientation:window.orientation},description:["orientationchange:",t[window.orientation/90+1],window.orientation].join("")})}function a(s){var a,r,n,o,i=jQuery(window),c=i.data("ojQueryGestures"),u=e.jGestures.defaults.thresholdShake,h=c.oDeviceMotionLastDevicePosition||{accelerationIncludingGravity:{x:0,y:0,z:0},shake:{eventCount:0,intervalsPassed:0,intervalsFreeze:0},shakeleftright:{eventCount:0,intervalsPassed:0,intervalsFreeze:0},shakefrontback:{eventCount:0,intervalsPassed:0,intervalsFreeze:0},shakeupdown:{eventCount:0,intervalsPassed:0,intervalsFreeze:0}},d={accelerationIncludingGravity:{x:s.accelerationIncludingGravity.x,y:s.accelerationIncludingGravity.y,z:s.accelerationIncludingGravity.z},shake:{eventCount:h.shake.eventCount,intervalsPassed:h.shake.intervalsPassed,intervalsFreeze:h.shake.intervalsFreeze},shakeleftright:{eventCount:h.shakeleftright.eventCount,intervalsPassed:h.shakeleftright.intervalsPassed,intervalsFreeze:h.shakeleftright.intervalsFreeze},shakefrontback:{eventCount:h.shakefrontback.eventCount,intervalsPassed:h.shakefrontback.intervalsPassed,intervalsFreeze:h.shakefrontback.intervalsFreeze},shakeupdown:{eventCount:h.shakeupdown.eventCount,intervalsPassed:h.shakeupdown.intervalsPassed,intervalsFreeze:h.shakeupdown.intervalsFreeze}};for(a in c){switch(a){case"shake":case"shakeleftright":case"shakefrontback":case"shakeupdown":if(r=[],n=[],r.push(a),++d[a].intervalsFreeze>u.freezeShakes&&d[a].intervalsFreeze<2*u.freezeShakes)break;d[a].intervalsFreeze=0,d[a].intervalsPassed++,"shake"!==a&&"shakeleftright"!==a||!(d.accelerationIncludingGravity.x>u.leftright.sensitivity||d.accelerationIncludingGravity.x<-1*u.leftright.sensitivity)||(r.push("leftright"),r.push("x-axis")),"shake"!==a&&"shakefrontback"!==a||!(d.accelerationIncludingGravity.y>u.frontback.sensitivity||d.accelerationIncludingGravity.y<-1*u.frontback.sensitivity)||(r.push("frontback"),r.push("y-axis")),"shake"!==a&&"shakeupdown"!==a||!(d.accelerationIncludingGravity.z+9.81>u.updown.sensitivity||d.accelerationIncludingGravity.z+9.81<-1*u.updown.sensitivity)||(r.push("updown"),r.push("z-axis")),r.length>1&&(++d[a].eventCount==u.requiredShakes&&d[a].intervalsPassed<u.freezeShakes?(i.triggerHandler(a,t({type:a,description:r.join(":"),event:s,duration:5*d[a].intervalsPassed})),d[a].eventCount=0,d[a].intervalsPassed=0,d[a].intervalsFreeze=u.freezeShakes+1):d[a].eventCount==u.requiredShakes&&d[a].intervalsPassed>u.freezeShakes&&(d[a].eventCount=0,d[a].intervalsPassed=0))}o={},o.oDeviceMotionLastDevicePosition=d,i.data("ojQueryGestures",e.extend(!0,c,o))}}function r(t){var s=jQuery(t.currentTarget);s.triggerHandler(e.jGestures.events.touchstart,t),e.hasGestures?(t.currentTarget.addEventListener("touchmove",n,!1),t.currentTarget.addEventListener("touchend",o,!1)):(s.bind("mousemove",n),s.bind("mouseup",o));var a=s.data("ojQueryGestures"),r=t.touches?t.touches[0]:t,i={};i.oLastSwipemove={screenX:r.screenX,screenY:r.screenY,timestamp:(new Date).getTime()},i.oStartTouch={screenX:r.screenX,screenY:r.screenY,timestamp:(new Date).getTime()},s.data("ojQueryGestures",e.extend(!0,a,i))}function n(s){var a,r=jQuery(s.currentTarget),n=r.data("ojQueryGestures"),o=!!s.touches,i=o?s.changedTouches[0].screenX:s.screenX,c=o?s.changedTouches[0].screenY:s.screenY,u=n.oLastSwipemove,h=i-u.screenX,d=c-u.screenY;n.oLastSwipemove&&(a=t({type:"swipemove",touches:o?s.touches.length:"1",screenY:c,screenX:i,deltaY:d,deltaX:h,startMove:u,event:s,timestamp:u.timestamp}),r.triggerHandler(a.type,a));var l={},p=s.touches?s.touches[0]:s;l.oLastSwipemove={screenX:p.screenX,screenY:p.screenY,timestamp:(new Date).getTime()},r.data("ojQueryGestures",e.extend(!0,n,l))}function o(s){var a=jQuery(s.currentTarget),r=!!s.changedTouches,i=r?s.changedTouches.length:"1",c=r?s.changedTouches[0].screenX:s.screenX,u=r?s.changedTouches[0].screenY:s.screenY;a.triggerHandler(e.jGestures.events.touchendStart,s),e.hasGestures?(s.currentTarget.removeEventListener("touchmove",n,!1),s.currentTarget.removeEventListener("touchend",o,!1)):(a.unbind("mousemove",n),a.unbind("mouseup",o));var h,d,l,p,v,g,w,f=a.data("ojQueryGestures"),k=Math.abs(f.oStartTouch.screenX-c)>e.jGestures.defaults.thresholdMove||Math.abs(f.oStartTouch.screenY-u)>e.jGestures.defaults.thresholdMove?!0:!1,y=Math.abs(f.oStartTouch.screenX-c)>e.jGestures.defaults.thresholdSwipe||Math.abs(f.oStartTouch.screenY-u)>e.jGestures.defaults.thresholdSwipe?!0:!1,j=["zero","one","two","three","four"];for(h in f){switch(d=f.oStartTouch,l={},c=r?s.changedTouches[0].screenX:s.screenX,u=r?s.changedTouches[0].screenY:s.screenY,p=c-d.screenX,v=u-d.screenY,g=t({type:"swipe",touches:i,screenY:u,screenX:c,deltaY:v,deltaX:p,startMove:d,event:s,timestamp:d.timestamp}),w=!1,h){case"swipeone":if(r===!1&&1==i&&k===!1)break;(r===!1||1==i&&k===!0&&y===!0)&&(w=!0,g.type=["swipe",j[i]].join(""),a.triggerHandler(g.type,g));break;case"swipetwo":r&&2==i&&k===!0&&y===!0&&(w=!0,g.type=["swipe",j[i]].join(""),a.triggerHandler(g.type,g));break;case"swipethree":r&&3==i&&k===!0&&y===!0&&(w=!0,g.type=["swipe",j[i]].join(""),a.triggerHandler(g.type,g));break;case"swipefour":r&&4==i&&k===!0&&y===!0&&(w=!0,g.type=["swipe",j[i]].join(""),a.triggerHandler(g.type,g));break;case"swipeup":case"swiperightup":case"swiperight":case"swiperightdown":case"swipedown":case"swipeleftdown":case"swipeleft":case"swipeleftup":r&&k===!0&&y===!0&&(w=!0,g.type=["swipe",0!=g.delta[0].lastX?g.delta[0].lastX>0?"right":"left":"",0!=g.delta[0].lastY?g.delta[0].lastY>0?"down":"up":""].join(""),a.triggerHandler(g.type,g));break;case"tapone":case"taptwo":case"tapthree":case"tapfour":k!==!0&&w!==!0&&j[i]==h.slice(3)&&(g.description=["tap",j[i]].join(""),g.type=["tap",j[i]].join(""),a.triggerHandler(g.type,g))}var m={};a.data("ojQueryGestures",e.extend(!0,f,m)),a.data("ojQueryGestures",e.extend(!0,f,m))}a.triggerHandler(e.jGestures.events.touchendProcessed,s)}function i(t){var s=jQuery(t.currentTarget);s.triggerHandler(e.jGestures.events.gesturestart,t);var a=s.data("ojQueryGestures"),r={};r.oStartTouch={timestamp:(new Date).getTime()},s.data("ojQueryGestures",e.extend(!0,a,r))}function c(s){var a,r,n,o,i=jQuery(s.currentTarget),c=i.data("ojQueryGestures");for(o in c)switch(o){case"pinch":a=s.scale,(1>a&&a%1<1-e.jGestures.defaults.thresholdPinchclose||a>1&&a%1>e.jGestures.defaults.thresholdPinchopen)&&(r=1>a?-1:1,n=t({type:"pinch",scale:a,touches:null,startMove:c.oStartTouch,event:s,timestamp:c.oStartTouch.timestamp,vector:r,description:["pinch:",r,":",1>a?"close":"open"].join("")}),i.triggerHandler(n.type,n));break;case"rotate":a=s.rotation,(1>a&&-1*a>e.jGestures.defaults.thresholdRotateccw||a>1&&a>e.jGestures.defaults.thresholdRotatecw)&&(r=1>a?-1:1,n=t({type:"rotate",rotation:a,touches:null,startMove:c.oStartTouch,event:s,timestamp:c.oStartTouch.timestamp,vector:r,description:["rotate:",r,":",1>a?"counterclockwise":"clockwise"].join("")}),i.triggerHandler(n.type,n))}}function u(s){var a=jQuery(s.currentTarget);a.triggerHandler(e.jGestures.events.gestureendStart,s);var r,n,o=a.data("ojQueryGestures");for(n in o)switch(n){case"pinchclose":r=s.scale,1>r&&r%1<1-e.jGestures.defaults.thresholdPinchclose&&a.triggerHandler("pinchclose",t({type:"pinchclose",scale:r,vector:-1,touches:null,startMove:o.oStartTouch,event:s,timestamp:o.oStartTouch.timestamp,description:"pinch:-1:close"}));break;case"pinchopen":r=s.scale,r>1&&r%1>e.jGestures.defaults.thresholdPinchopen&&a.triggerHandler("pinchopen",t({type:"pinchopen",scale:r,vector:1,touches:null,startMove:o.oStartTouch,event:s,timestamp:o.oStartTouch.timestamp,description:"pinch:+1:open"}));break;case"rotatecw":r=s.rotation,r>1&&r>e.jGestures.defaults.thresholdRotatecw&&a.triggerHandler("rotatecw",t({type:"rotatecw",rotation:r,vector:1,touches:null,startMove:o.oStartTouch,event:s,timestamp:o.oStartTouch.timestamp,description:"rotate:+1:clockwise"}));break;case"rotateccw":r=s.rotation,1>r&&-1*r>e.jGestures.defaults.thresholdRotateccw&&a.triggerHandler("rotateccw",t({type:"rotateccw",rotation:r,vector:-1,touches:null,startMove:o.oStartTouch,event:s,timestamp:o.oStartTouch.timestamp,description:"rotate:-1:counterclockwise"}))}a.triggerHandler(e.jGestures.events.gestureendProcessed,s)}e.jGestures={},e.jGestures.defaults={},e.jGestures.defaults.thresholdShake={requiredShakes:10,freezeShakes:100,frontback:{sensitivity:10},leftright:{sensitivity:10},updown:{sensitivity:10}},e.jGestures.defaults.thresholdPinchopen=.05,e.jGestures.defaults.thresholdPinchmove=.05,e.jGestures.defaults.thresholdPinch=.05,e.jGestures.defaults.thresholdPinchclose=.05,e.jGestures.defaults.thresholdRotatecw=5,e.jGestures.defaults.thresholdRotateccw=5,e.jGestures.defaults.thresholdMove=20,e.jGestures.defaults.thresholdSwipe=100,e.jGestures.data={},e.jGestures.data.capableDevicesInUserAgentString=["iPad","iPhone","iPod","Mobile Safari"],e.jGestures.data.hasGestures=function(){var t;for(t=0;t<e.jGestures.data.capableDevicesInUserAgentString.length;t++)if(-1!==navigator.userAgent.indexOf(e.jGestures.data.capableDevicesInUserAgentString[t]))return!0;return!1}(),e.hasGestures=e.jGestures.data.hasGestures,e.jGestures.events={touchstart:"jGestures.touchstart",touchendStart:"jGestures.touchend;start",touchendProcessed:"jGestures.touchend;processed",gesturestart:"jGestures.gesturestart",gestureendStart:"jGestures.gestureend;start",gestureendProcessed:"jGestures.gestureend;processed"},jQuery.each({orientationchange_orientationchange01:"orientationchange",gestureend_pinchopen01:"pinchopen",gestureend_pinchclose01:"pinchclose",gestureend_rotatecw01:"rotatecw",gestureend_rotateccw01:"rotateccw",gesturechange_pinch01:"pinch",gesturechange_rotate01:"rotate",touchstart_swipe13:"swipemove",touchstart_swipe01:"swipeone",touchstart_swipe02:"swipetwo",touchstart_swipe03:"swipethree",touchstart_swipe04:"swipefour",touchstart_swipe05:"swipeup",touchstart_swipe06:"swiperightup",touchstart_swipe07:"swiperight",touchstart_swipe08:"swiperightdown",touchstart_swipe09:"swipedown",touchstart_swipe10:"swipeleftdown",touchstart_swipe11:"swipeleft",touchstart_swipe12:"swipeleftup",touchstart_tap01:"tapone",touchstart_tap02:"taptwo",touchstart_tap03:"tapthree",touchstart_tap04:"tapfour",devicemotion_shake01:"shake",devicemotion_shake02:"shakefrontback",devicemotion_shake03:"shakeleftright",devicemotion_shake04:"shakeupdown"},function(t,h){jQuery.event.special[h]={setup:function(){var n,o,h=t.split("_"),d=h[0],l=h[1].slice(0,h[1].length-2),p=jQuery(this);if(!p.data("ojQueryGestures")||!p.data("ojQueryGestures")[d])if(n=p.data("ojQueryGestures")||{},o={},o[d]=!0,e.extend(!0,n,o),p.data("ojQueryGestures",n),e.hasGestures)switch(l){case"orientationchange":p.get(0).addEventListener("orientationchange",s,!1);break;case"shake":case"shakefrontback":case"shakeleftright":case"shakeupdown":case"tilt":p.get(0).addEventListener("devicemotion",a,!1);break;case"tap":case"swipe":case"swipeup":case"swiperightup":case"swiperight":case"swiperightdown":case"swipedown":case"swipeleftdown":case"swipeleft":p.get(0).addEventListener("touchstart",r,!1);break;case"pinchopen":case"pinchclose":case"rotatecw":case"rotateccw":p.get(0).addEventListener("gesturestart",i,!1),p.get(0).addEventListener("gestureend",u,!1);break;case"pinch":case"rotate":p.get(0).addEventListener("gesturestart",i,!1),p.get(0).addEventListener("gesturechange",c,!1)}else switch(l){case"tap":case"swipe":p.bind("mousedown",r);break;case"orientationchange":case"pinchopen":case"pinchclose":case"rotatecw":case"rotateccw":case"pinch":case"rotate":case"shake":case"tilt":}return!1},add:function(e){var t=jQuery(this),s=t.data("ojQueryGestures");return s[e.type]={originalType:e.type},!1},remove:function(e){var t=jQuery(this),s=t.data("ojQueryGestures");return s[e.type]=!1,t.data("ojQueryGestures",s),!1},teardown:function(){var h,d,l=t.split("_"),p=l[0],v=l[1].slice(0,l[1].length-2),g=jQuery(this);if(!g.data("ojQueryGestures")||!g.data("ojQueryGestures")[p])if(h=g.data("ojQueryGestures")||{},d={},d[p]=!1,e.extend(!0,h,d),g.data("ojQueryGestures",h),e.hasGestures)switch(v){case"orientationchange":g.get(0).removeEventListener("orientationchange",s,!1);break;case"shake":case"shakefrontback":case"shakeleftright":case"shakeupdown":case"tilt":g.get(0).removeEventListener("devicemotion",a,!1);break;case"tap":case"swipe":case"swipeup":case"swiperightup":case"swiperight":case"swiperightdown":case"swipedown":case"swipeleftdown":case"swipeleft":case"swipeleftup":g.get(0).removeEventListener("touchstart",r,!1),g.get(0).removeEventListener("touchmove",n,!1),g.get(0).removeEventListener("touchend",o,!1);break;case"pinchopen":case"pinchclose":case"rotatecw":case"rotateccw":g.get(0).removeEventListener("gesturestart",i,!1),g.get(0).removeEventListener("gestureend",u,!1);break;case"pinch":case"rotate":g.get(0).removeEventListener("gesturestart",i,!1),g.get(0).removeEventListener("gesturechange",c,!1)}else switch(v){case"tap":case"swipe":g.unbind("mousedown",r),g.unbind("mousemove",n),g.unbind("mouseup",o);break;case"orientationchange":case"pinchopen":case"pinchclose":case"rotatecw":case"rotateccw":case"pinch":case"rotate":case"shake":case"tilt":}return!1}}})}(jQuery);